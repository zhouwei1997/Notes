# shell条件判断

[TOC]

## 条件判断

- 格式1：test表达式
- 格式2：[条件表达式]
- 格式3：[[条件表达式]] 支持正则 

## 条件判断相关参数

### 与文件存在与否的判断

| 选项 | 说明                                               |
| ---- | -------------------------------------------------- |
| -e   | 是否存在，不管是目录或者文件，只要存在，条件就成立 |
| -f   | 是否为普通文件                                     |
| -d   | 是否为目录                                         |
| -S   | socket                                             |
| -p   | pipe                                               |
| -c   | character                                          |
| -b   | block                                              |
| -L   | 软link                                             |

~~~shell 
# 判断文件是否存在
test -e file
# 判断文件是否存在，并且是一个普通文件
[[ -f /shell01/1]]
# 判断目录市场存在
[ -d /shell01/dir1 ]
[ ! -d /shell01/dir1 ]
~~~

### 文件权限相关

| 选项 | 说明                   |
| ---- | ---------------------- |
| -r   | 当前用户对其是否可读   |
| -w   | 当前用户对其是否可写   |
| -x   | 当前用户对其是否可执行 |
| -u   | 是否有suid             |
| -g   | 是否sgid               |
| -k   | 是否有t位              |



### 两个文件比较

~~~shell
# 比较file1是否比file2新
file1 -ne file2
# 比较file1是否比file2旧
file1 -ot file2
# 比较是否为同一个文件，或者用于判断硬连接，是否指向通过一个inode
file1 -ef fil
~~~